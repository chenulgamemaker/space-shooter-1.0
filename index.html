<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Space Shooter - Ultimate Edition</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0a0a2a, #1a1a4a);
            color: white;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .game-container {
            text-align: center;
            max-width: 900px;
            width: 100%;
        }
        
        .game-header {
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(0, 20, 40, 0.8);
            border-radius: 10px;
            border: 2px solid #00aaff;
        }
        
        h1 {
            font-size: 2.5rem;
            color: #00ffff;
            text-shadow: 0 0 10px #00aaff;
            margin-bottom: 10px;
        }
        
        .game-stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(0, 10, 30, 0.7);
            border-radius: 10px;
            border: 1px solid #3366ff;
        }
        
        .stat {
            background: rgba(20, 40, 80, 0.6);
            padding: 10px 20px;
            border-radius: 8px;
            min-width: 150px;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #88aaff;
            margin-bottom: 5px;
        }
        
        .stat-value {
            font-size: 1.4rem;
            font-weight: bold;
            color: #ffff00;
        }
        
        .weapon-info {
            background: rgba(30, 50, 100, 0.6);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .weapon-icon {
            font-size: 2rem;
        }
        
        .weapon-name {
            font-size: 1.2rem;
            font-weight: bold;
            color: #ffcc00;
        }
        
        canvas {
            background: #000;
            border-radius: 10px;
            border: 3px solid #00aaff;
            box-shadow: 0 0 30px rgba(0, 150, 255, 0.5);
            margin-bottom: 20px;
        }
        
        .controls {
            background: rgba(0, 20, 40, 0.8);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #3366ff;
            margin-bottom: 20px;
        }
        
        .key {
            display: inline-block;
            background: rgba(50, 100, 200, 0.8);
            padding: 5px 15px;
            margin: 5px;
            border-radius: 5px;
            border: 1px solid #6688ff;
            font-weight: bold;
        }
        
        .game-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 40, 0.95);
            padding: 40px;
            border-radius: 15px;
            border: 3px solid #00ffaa;
            box-shadow: 0 0 50px rgba(0, 255, 170, 0.5);
            text-align: center;
            display: none;
            z-index: 1000;
        }
        
        .game-message h2 {
            font-size: 2.5rem;
            color: #00ffaa;
            margin-bottom: 20px;
        }
        
        .btn {
            background: linear-gradient(to bottom, #00aaff, #0066ff);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1.1rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 20px;
            transition: transform 0.2s;
        }
        
        .btn:hover {
            transform: scale(1.05);
        }
        
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0a0a2a;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }
        
        .loading-text {
            font-size: 1.2rem;
            color: #00ffff;
            margin-top: 20px;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(0, 170, 255, 0.3);
            border-top: 5px solid #00aaff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="loading-screen" id="loadingScreen">
        <div class="spinner"></div>
        <div class="loading-text">Loading sprites...</div>
    </div>

    <div class="game-container">
        <div class="game-header">
            <h1>üöÄ SPACE SHOOTER</h1>
            <p>Defeat all enemies and survive the boss wave!</p>
        </div>
        
        <div class="game-stats">
            <div class="stat">
                <div class="stat-label">SCORE</div>
                <div class="stat-value" id="score">0</div>
            </div>
            <div class="stat">
                <div class="stat-label">HEALTH</div>
                <div class="stat-value" id="health">100</div>
            </div>
            <div class="stat">
                <div class="stat-label">LEVEL</div>
                <div class="stat-value" id="level">1</div>
            </div>
            <div class="stat">
                <div class="stat-label">WEAPON</div>
                <div class="stat-value" id="weapon">1/5</div>
            </div>
        </div>
        
        <div class="weapon-info">
            <div class="weapon-icon" id="weaponIcon">üî´</div>
            <div>
                <div class="weapon-name" id="weaponName">Laser Pistol</div>
                <div id="weaponDesc">Standard issue weapon</div>
            </div>
        </div>
        
        <canvas id="gameCanvas" width="800" height="600"></canvas>
        
        <div class="controls">
            <h3>CONTROLS</h3>
            <p>
                <span class="key">‚Üê</span>
                <span class="key">‚Üí</span>
                <span class="key">‚Üë</span>
                <span class="key">‚Üì</span> Move |
                <span class="key">SPACE</span> Shoot |
                <span class="key">Q</span> Previous Weapon |
                <span class="key">E</span> Next Weapon
            </p>
        </div>
        
        <div class="game-message" id="gameOver">
            <h2>GAME OVER</h2>
            <p>Your ship was destroyed!</p>
            <p>Final Score: <span id="finalScore">0</span></p>
            <button class="btn" onclick="restartGame()">PLAY AGAIN</button>
        </div>
        
        <div class="game-message" id="gameWin">
            <h2>VICTORY!</h2>
            <p>You defeated the Alien Boss!</p>
            <p>Final Score: <span id="winScore">0</span></p>
            <button class="btn" onclick="restartGame()">PLAY AGAIN</button>
        </div>
    </div>

    <script>
        // Game variables
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        let gameRunning = true;
        let score = 0;
        let playerHealth = 100;
        let level = 1;
        let currentWeapon = 0;
        let spritesLoaded = false;
        
        // Create off-screen canvas for sprites
        const spriteCanvas = document.createElement('canvas');
        const spriteCtx = spriteCanvas.getContext('2d');
        
        // Player object
        const player = {
            x: canvas.width / 2,
            y: canvas.height - 100,
            width: 40,
            height: 50,
            speed: 6,
            spriteX: 0,
            spriteY: 0
        };
        
        // Weapons array
        const weapons = [
            {
                name: "Laser Pistol",
                icon: "üî´",
                damage: 10,
                fireRate: 300,
                projectileSpeed: 8,
                color: "#00ffff",
                description: "Standard rapid fire"
            },
            {
                name: "Plasma Rifle",
                icon: "‚ö°",
                damage: 15,
                fireRate: 400,
                projectileSpeed: 7,
                color: "#ff00ff",
                description: "Higher damage"
            },
            {
                name: "Rocket Launcher",
                icon: "üöÄ",
                damage: 25,
                fireRate: 600,
                projectileSpeed: 5,
                color: "#ff5500",
                description: "Explosive projectiles"
            },
            {
                name: "Ion Cannon",
                icon: "üí†",
                damage: 20,
                fireRate: 200,
                projectileSpeed: 10,
                color: "#00ffaa",
                description: "Rapid energy bursts"
            },
            {
                name: "Quantum Blaster",
                icon: "üåÄ",
                damage: 40,
                fireRate: 800,
                projectileSpeed: 6,
                color: "#aa00ff",
                description: "Ultimate weapon"
            }
        ];
        
        // Enemies array
        const enemies = [
            {
                name: "Scout Drone",
                width: 25,
                height: 25,
                speed: 3,
                health: 30,
                color: "#ff5555",
                points: 10,
                spriteX: 50,
                spriteY: 0
            },
            {
                name: "Fighter Ship",
                width: 35,
                height: 35,
                speed: 2,
                health: 50,
                color: "#ff8888",
                points: 20,
                spriteX: 100,
                spriteY: 0
            },
            {
                name: "Bomber",
                width: 45,
                height: 40,
                speed: 1.5,
                health: 80,
                color: "#ffaa00",
                points: 30,
                spriteX: 150,
                spriteY: 0
            },
            {
                name: "Battle Cruiser",
                width: 60,
                height: 45,
                speed: 1,
                health: 120,
                color: "#ff4400",
                points: 50,
                spriteX: 200,
                spriteY: 0
            },
            {
                name: "Alien Boss",
                width: 100,
                height: 70,
                speed: 0.5,
                health: 500,
                color: "#aa0000",
                points: 500,
                spriteX: 0,
                spriteY: 100
            }
        ];
        
        // Game objects
        let playerProjectiles = [];
        let enemyProjectiles = [];
        let enemyObjects = [];
        let particles = [];
        let keys = {};
        let lastFired = 0;
        let enemySpawnTimer = 0;
        let bossSpawned = false;
        
        // Create sprite sheet
        function createSprites() {
            spriteCanvas.width = 300;
            spriteCanvas.height = 200;
            
            // Clear sprite canvas
            spriteCtx.clearRect(0, 0, spriteCanvas.width, spriteCanvas.height);
            
            // Player ship (Blue)
            spriteCtx.fillStyle = '#00aaff';
            spriteCtx.beginPath();
            spriteCtx.moveTo(20, 60);
            spriteCtx.lineTo(0, 80);
            spriteCtx.lineTo(40, 80);
            spriteCtx.closePath();
            spriteCtx.fill();
            
            // Player ship details
            spriteCtx.fillStyle = '#0088ff';
            spriteCtx.fillRect(10, 70, 20, 10);
            spriteCtx.fillStyle = '#88ddff';
            spriteCtx.beginPath();
            spriteCtx.arc(20, 65, 5, 0, Math.PI * 2);
            spriteCtx.fill();
            
            // Enemy 1 - Scout Drone (Red)
            spriteCtx.fillStyle = '#ff5555';
            spriteCtx.fillRect(50, 0, 25, 25);
            spriteCtx.fillStyle = '#ff0000';
            spriteCtx.fillRect(55, 5, 15, 15);
            
            // Enemy 2 - Fighter Ship (Orange)
            spriteCtx.fillStyle = '#ffaa00';
            spriteCtx.beginPath();
            spriteCtx.moveTo(100, 0);
            spriteCtx.lineTo(85, 35);
            spriteCtx.lineTo(115, 35);
            spriteCtx.closePath();
            spriteCtx.fill();
            
            // Enemy 3 - Bomber (Yellow)
            spriteCtx.fillStyle = '#ffff00';
            spriteCtx.fillRect(150, 0, 45, 40);
            spriteCtx.fillStyle = '#ffcc00';
            spriteCtx.fillRect(155, 10, 35, 20);
            
            // Enemy 4 - Battle Cruiser (Purple)
            spriteCtx.fillStyle = '#aa55ff';
            spriteCtx.fillRect(200, 0, 60, 45);
            spriteCtx.fillStyle = '#8844ff';
            spriteCtx.fillRect(205, 10, 50, 25);
            
            // Boss - Alien Boss (Dark Red)
            spriteCtx.fillStyle = '#aa0000';
            spriteCtx.fillRect(0, 100, 100, 70);
            spriteCtx.fillStyle = '#880000';
            spriteCtx.fillRect(20, 110, 60, 40);
            spriteCtx.fillStyle = '#ff0000';
            spriteCtx.fillRect(30, 120, 40, 20);
            
            console.log("Sprites created successfully!");
            spritesLoaded = true;
            document.getElementById('loadingScreen').style.display = 'none';
        }
        
        // Draw player from sprite sheet
        function drawPlayer() {
            if (spritesLoaded) {
                ctx.drawImage(spriteCanvas, 
                    player.spriteX, player.spriteY, 40, 50,
                    player.x - player.width/2, player.y - player.height/2, 
                    player.width, player.height);
            } else {
                // Fallback if sprites not loaded
                ctx.fillStyle = '#00aaff';
                ctx.beginPath();
                ctx.moveTo(player.x, player.y - player.height/2);
                ctx.lineTo(player.x - player.width/2, player.y + player.height/2);
                ctx.lineTo(player.x + player.width/2, player.y + player.height/2);
                ctx.closePath();
                ctx.fill();
            }
        }
        
        // Draw enemy from sprite sheet
        function drawEnemy(enemy) {
            if (spritesLoaded) {
                ctx.drawImage(spriteCanvas, 
                    enemy.spriteX, enemy.spriteY, enemy.width, enemy.height,
                    enemy.x - enemy.width/2, enemy.y - enemy.height/2, 
                    enemy.width, enemy.height);
            } else {
                // Fallback if sprites not loaded
                ctx.fillStyle = enemy.color;
                ctx.fillRect(enemy.x - enemy.width/2, enemy.y - enemy.height/2, 
                           enemy.width, enemy.height);
            }
        }
        
        // Draw projectiles
        function drawProjectiles() {
            playerProjectiles.forEach(proj => {
                ctx.fillStyle = weapons[currentWeapon].color;
                ctx.beginPath();
                ctx.arc(proj.x, proj.y, proj.radius, 0, Math.PI * 2);
                ctx.fill();
                
                // Glow effect
                ctx.shadowColor = weapons[currentWeapon].color;
                ctx.shadowBlur = 15;
                ctx.fill();
                ctx.shadowBlur = 0;
            });
            
            enemyProjectiles.forEach(proj => {
                ctx.fillStyle = proj.color;
                ctx.beginPath();
                ctx.arc(proj.x, proj.y, proj.radius, 0, Math.PI * 2);
                ctx.fill();
            });
        }
        
        // Draw particles
        function drawParticles() {
            particles.forEach(particle => {
                ctx.globalAlpha = particle.alpha;
                ctx.fillStyle = particle.color;
                ctx.beginPath();
                ctx.arc(particle.x, particle.y, particle.radius, 0, Math.PI * 2);
                ctx.fill();
           
